<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
	<title>Ngọ Môn Huế 3D</title>

	<style>
		html,
		body,
		#viewDiv {
			padding: 0;
			margin: 0;
			height: 100%;
			width: 100%;
		}

		#back {
			position: absolute;
			bottom: 20px;
		}

		#back i {
			background-image: url(app/public/img/back.svg);
			background-repeat: no-repeat;
			display: inline-block;
			width: 100px;
			height: 25px;
			padding-left: 25px;
			padding-top: 2px;
			margin: 10px;
			cursor: pointer;
			background-size: 20px;
		}
	</style>

	<link rel="stylesheet" href="https://js.arcgis.com/4.26/esri/themes/light/main.css" />
	<script src="https://js.arcgis.com/4.26/"></script>

	<script>
		require([
			"esri/Map",
			"esri/views/SceneView",
			"esri/layers/GeoJSONLayer",
			"esri/layers/SceneLayer", "esri/layers/GraphicsLayer", "esri/Graphic", "esri/request"
		], function (Map, SceneView, GeoJSONLayer, SceneLayer,
			GraphicsLayer, Graphic, esriRequest) {

			// geojson layer
			const geojsonLayer = new GeoJSONLayer({
				url: "./data/floor/floor1.geojson.json"
			});

			const geojsonLayer1 = new GeoJSONLayer({
				url: "./data/floor/floor.right.wall.geojson.json"
			});

			const geojsonLayer2 = new GeoJSONLayer({
				url: "./data/floor/floor.geojson.json"
			});

			const geojsonLayer3 = new GeoJSONLayer({
				url: "./data/floor/floor.back.geojson.json"
			});

			const floorEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/floor.entry.geojson.json"
			});

			const floorLeftGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/floor.left.geojson.json"
			});

			const leftWallEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/left_entry/left_wall.geojson.json"
			});

			const rightWallLeftEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/left_entry/right_wall.geojson.json"
			});

			const topWallLeftEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/left_entry/top_wall.geojson.json"
			});

			const leftWallCenterEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/center_entry/left_wall.geojson.json"
			});

			const rightWallCenterEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/center_entry/right_wall.geojson.json"
			});

			const topWallCenterEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/center_entry/top_wall.geojson.json"
			});

			const leftWallRightEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/right_entry/left_wall.geojson.json"
			});

			const rightWallRightEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/right_entry/right_wall.geojson.json"
			});

			const topWallRightEntryGeojsonLayer = new GeoJSONLayer({
				url: "./data/floor/right_entry/top_wall.geojson.json"
			});


			geojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "fill",
							size: 0,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			geojsonLayer1.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "fill",
							size: 0,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			geojsonLayer2.renderer = {
				type: "simple",
				symbol: {
					type: "line-3d",
					symbolLayers: [
						{
							type: "path",
							profile: "quad",
							material: {
								color: "#FF0000",
							},
							width: 3.0,
							height: 0.0,
							join: "bevel",
							cap: "butt",
							profileRotation: "heading",
							anchor: "bottom",
						},
					],
				},
			}

			geojsonLayer3.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "fill",
							size: 0,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			floorEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "fill",
							size: 0,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			leftWallEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 3.94,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			rightWallLeftEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 3.94,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			topWallLeftEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 0.5,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			rightWallCenterEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 4.44,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			leftWallCenterEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 4.44,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			topWallCenterEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 0.5,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			leftWallRightEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 3.94,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			rightWallRightEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 3.94,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			topWallRightEntryGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "extrude",
							size: 0.5,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			floorLeftGeojsonLayer.renderer = {
				type: "simple",
				symbol: {
					type: "polygon-3d",
					symbolLayers: [
						{
							type: "fill",
							size: 0,
							material: {
								color: "#FF0000"
							},
						}
					]
				}
			};

			const map = new Map({
				basemap: "topo-vector",
				layers: [geojsonLayer, geojsonLayer1,
					geojsonLayer3, floorEntryGeojsonLayer,
					floorLeftGeojsonLayer,
					leftWallEntryGeojsonLayer, rightWallLeftEntryGeojsonLayer,
					topWallLeftEntryGeojsonLayer,
					rightWallCenterEntryGeojsonLayer,
					leftWallCenterEntryGeojsonLayer, topWallCenterEntryGeojsonLayer,
					leftWallRightEntryGeojsonLayer, rightWallRightEntryGeojsonLayer,
					topWallRightEntryGeojsonLayer
				] //end layers
			});

			const view = new SceneView({
				container: "viewDiv",
				map: map,
				camera: {
					position: [107.578889, 16.467669, 500],
					heading: 0,
					tilt: 0
				}
			});
			var graphicsLayer = new GraphicsLayer();

			map.add(graphicsLayer);

			const polyline = {
				type: "polyline", // autocasts as new Polyline()
				paths: [[107.57931314144261, 16.467736169255335],
				[107.57943314897108, 16.467821174596647]]
			};

			const lineSymbol = {
				type: "simple-line", // autocasts as SimpleLineSymbol()
				color: [0, 0, 0],
				width: 4
			};
			const polylineGraphic = new Graphic({
				geometry: polyline,
				symbol: lineSymbol
			});

			graphicsLayer.add(polylineGraphic);

			view.popup.defaultPopupTemplateEnabled = true;
		});

	</script>
</head>

<body>
	<div id="viewDiv"></div>
</body>

</html>